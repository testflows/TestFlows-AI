name: ðŸ¦¾ OmniParser docker image
run-name: ${{ github.actor }} is buiding OmniParser docker image ðŸš€
on:
  workflow_dispatch:
    inputs:
      tag:
        description: "Tag"
        default: latest
        required: false
      omniparser_commit:
        description: "OmniParser commit hash"
        default: a14c401
        required: false
jobs:
  build:
    runs-on: [ubuntu-22.04]
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Checkout OmniParser repository
        run: |
          git clone --depth=1 https://github.com/microsoft/OmniParser.git repo
          cd repo
          git fetch --depth=1 origin ${{ env.OMNIPARSER_COMMIT }}
          git checkout ${{ env.OMNIPARSER_COMMIT }}

      - name: Install Hugging Face Hub
        run: |
          ls
          python --version
          pip install huggingface_hub
          huggingface-cli --help
